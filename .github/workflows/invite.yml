name: Auto Invite Member
on:
  issues:
    types: [opened]

jobs:
  invite:
    runs-on: ubuntu-latest
    # Der Bot reagiert nur, wenn "invite" im Titel steht
    if: contains(github.event.issue.title, 'invite')
    steps:
      - name: Send Organization Invitation
        uses: sushichop/action-repository-membership@v1
        with:
          token: ${{ secrets.INVITER_TOKEN }}
          organization: Java-Datengrab26
          username: ${{ github.event.issue.user.login }}
          role: member

      - name: Close Issue
        run: |
          gh issue close ${{ github.event.issue.number }} --comment "Du wurdest eingeladen! Bitte pr√ºfe deine E-Mails oder deine GitHub-Benachrichtigungen, um die Einladung anzunehmen."
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
